/* Family Tree – Pastel Whiteboard Theme v1.2 */

/* Fonts are loaded from the HTML via Google Fonts. */
:root {
  --ink: #151515;
  --bg: #ffffff;
  --muted: #f3f5f7;
  --grid: #eef1f4;

  /* Pastel palette inspired by the reference image */
  --mint: #bfffe1;
  --sage: #b8f3c8;
  --lime: #d7ff66;
  --sun: #ffe17a;
  --peach: #ffc7b5;
  --rose: #ff9ec9;
  --lilac: #e3d4ff;
  --sky: #bfe8ff;
  --violet: #c7b6ff;

  --card-radius: 14px;
  --avatar-size: 56px;
  --node-max-width: 240px;
  --outline: 2px;
  --shadow: 0 8px 0 rgba(0,0,0,0.06);
}

html, body { height: 100%; }
body {
  background: var(--bg);
  color: var(--ink);
  font-family: 'Poppins', 'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
}

/* Header ribbon (subtle, tight) */
.u-header-accent--gradient {
  background: linear-gradient(90deg, #8fd3ff, #bfffe1, #ffe17a, #ffb2e1);
}

/* Panels and inputs reused from v1 */
.panel { background: #fff; border: var(--outline) solid #111; border-radius: 16px; box-shadow: var(--shadow); }
.input { border: var(--outline) solid #111; border-radius: 10px; padding: 6px 10px; }
.btn { border: var(--outline) solid #111; border-radius: 10px; padding: 6px 10px; background: #fff; }
.btn-outline { background: #fff; }
.btn-sm { padding: 4px 10px; }
.btn-press { transition: transform .1s ease; }
.btn-press:active { transform: translateY(1px); }

/* Canvas grid like whiteboard */
.canvas-wrap { background: #fff; }
.canvas-grid {
  background:
    linear-gradient(0deg, var(--grid) 1px, transparent 1px) 0 0/28px 28px,
    linear-gradient(90deg, var(--grid) 1px, transparent 1px) 0 0/28px 28px,
    radial-gradient(20px 20px at 20px 20px, rgba(0,0,0,0.02), transparent 60%);
  border: var(--outline) solid #111;
  border-radius: 20px;
  position: relative;
}

.canvas-title { font-weight: 700; letter-spacing: -0.01em; }

/* Relationship legend */
.connection-legend { position: absolute; right: 12px; top: 12px; width: 200px; border: var(--outline) solid #111; border-radius: 12px; background: #fff; box-shadow: var(--shadow); }
.connection-legend .legend-row { display: flex; align-items: center; gap: 8px; font-size: 12px; margin-top: 6px; }
.legend-toggle { position: absolute; right: 6px; top: 6px; border: var(--outline) solid #111; background: #fff; border-radius: 8px; width: 26px; height: 26px; }
.connection-legend[data-expanded="false"] { width: 180px; }

/* Node – sticker card with floating avatar bubble */
/* Make nodes fluid with a sensible max-width and top padding to avoid overlap with previous row */
.node { position: relative; width: 100%; max-width: var(--node-max-width); padding-top: calc(var(--avatar-size) * 0.5 + 10px); }
.node .avatar {
  position: absolute; left: 50%; top: calc(-1 * var(--avatar-size) * 0.5); transform: translateX(-50%);
  width: var(--avatar-size); height: var(--avatar-size);
  border-radius: 999px; object-fit: cover;
  border: var(--outline) solid #111; background: var(--sky);
  box-shadow: 0 4px 0 rgba(0,0,0,0.08);
}
.node .card {
  background: #fff; border: var(--outline) solid #111; border-radius: var(--card-radius);
  padding: 14px 12px 12px; text-align: center; box-shadow: var(--shadow);
}
.node .name {
  font-weight: 700; font-size: 14px; line-height: 1;
  display: inline-block; padding: 6px 10px; border-radius: 10px; border: var(--outline) solid #111;
}
.node .meta { font-size: 12px; opacity: .75; margin-top: 6px; }

/* Color tags for names */
.name--mint { background: var(--mint); }
.name--sage { background: var(--sage); }
.name--lime { background: var(--lime); }
.name--sun { background: var(--sun); }
.name--peach { background: var(--peach); }
.name--rose { background: var(--rose); }
.name--lilac { background: var(--lilac); }
.name--sky { background: var(--sky); }
.name--violet { background: var(--violet); }

/* SVG connectors */
.connector { stroke: #111; stroke-width: 2.5; }
.connector--parent { }
.connector--spouse { stroke-dasharray: 7 7; }

/* Decorative flowers (simple clip-path stars) */
.flower { position: absolute; pointer-events: none; opacity: .9; filter: drop-shadow(0 4px 0 rgba(0,0,0,0.06)); }
.flower--mint { background: var(--mint); }
.flower--rose { background: var(--rose); }
.flower--sun { background: var(--sun); }
.flower--violet { background: var(--violet); }
.flower--shape {
  width: 90px; height: 90px; clip-path: polygon(50% 0%, 62% 32%, 97% 35%, 69% 56%, 79% 91%, 50% 71%, 21% 91%, 31% 56%, 3% 35%, 38% 32%);
}

/* Utilities */
.badge { display: inline-flex; align-items: center; gap: 6px; height: 26px; padding: 0 10px; border-radius: 999px; border: var(--outline) solid #111; background: #fff; }
.toolbar-rail button { display: inline-flex; align-items: center; gap: 8px; height: 34px; padding: 0 10px; border: var(--outline) solid #111; border-radius: 10px; background: #fff; }
.i { display: inline-flex; width: 16px; height: 16px; vertical-align: middle; }

/* Auto grid helper to avoid manual column counts and prevent overlaps */
.auto-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: clamp(12px, 3vw, 24px); justify-items: center; align-items: start; }

/* Inlined base theme (v1.1) + refinements (v1.2) to avoid @import issues */
/* ===== Base from family_tree_theme_1_1.css ===== */
:root { --surface: oklch(0.985 0.02 95); --surface-2: oklch(0.97 0.03 95); --ink: oklch(0.22 0.03 60); --mint: oklch(0.92 0.09 170); --peach: oklch(0.91 0.12 55); --apricot: oklch(0.92 0.10 65); --lilac: oklch(0.92 0.09 300); --sage: oklch(0.92 0.07 150); --sun: oklch(0.93 0.12 85); --rose: oklch(0.92 0.11 20); --card: #ffffff; --border: color-mix(in oklch, var(--ink), white 85%); --shadow-1: 0 2px 6px hsl(0 0% 0% / 0.06), 0 1px 2px hsl(0 0% 0% / 0.05); --radius-xl: 16px; --radius-lg: 12px; --radius-md: 10px; --font-sans: 'Poppins', 'Inter', system-ui, -apple-system, Segoe UI, Roboto, sans-serif; --header-start: oklch(0.63 0.22 300); --header-end: oklch(0.61 0.21 330); }
*, *::before, *::after { box-sizing: border-box !important; }
html, body { background: var(--surface) !important; color: var(--ink) !important; font-family: var(--font-sans) !important; }
h1, h2, h3, h4, h5, h6 { color: var(--ink) !important; font-weight: 700 !important; }
.u-header-accent--gradient { background: linear-gradient(90deg, var(--header-start), var(--header-end)) !important; box-shadow: 0 1px 0 hsl(0 0% 100% / 0.15) inset, 0 2px 10px hsl(270 30% 20% / 0.18) !important; }
.u-header-accent--gradient .btn-outline { border-color: hsl(0 0% 100% / 0.35) !important; color: white !important; background: hsl(0 0% 100% / 0.12) !important; }
.u-header-accent--gradient .input { background: hsl(0 0% 100% / 0.92) !important; }
.btn { display:inline-flex !important; align-items:center !important; gap:.5rem !important; font-weight:600 !important; font-size: clamp(12px, 1.6vw, 14px) !important; line-height:1.2 !important; padding:.5rem .75rem !important; min-height:36px !important; border-radius: 10px !important; white-space: nowrap !important; overflow: hidden !important; text-overflow: ellipsis !important; }
.btn-sm { padding:.375rem .625rem !important; min-height:32px !important; }
.btn-press { transition: transform 120ms ease, filter 120ms ease !important; }
.btn-press:active { transform: translateY(1px) scale(.98) !important; filter: brightness(.98) !important; }
.btn-outline { border:1px solid var(--border) !important; background: #ffffff40 !important; color: var(--ink) !important; }
.btn-primary { background: color-mix(in oklch, var(--peach), white 10%) !important; color: var(--ink) !important; }
.btn-primary--gradient { background: linear-gradient(90deg, color-mix(in oklch, var(--peach), white 6%), var(--peach)) !important; color: var(--ink) !important; }
.input { font-size: clamp(12px, 1.6vw, 14px) !important; line-height: 1.3 !important; padding:.5rem .625rem !important; border:1px solid var(--border) !important; border-radius: 10px !important; background: #fff !important; color: var(--ink) !important; }
.textarea { border:1px solid var(--border) !important; border-radius: 10px !important; }
.canvas-grid { background-image: radial-gradient(color-mix(in oklch, var(--ink), white 88%) 1px, transparent 1px) !important; background-size: 24px 24px !important; }
.panel { background: var(--card) !important; border: 1px solid var(--border) !important; border-radius: var(--radius-lg) !important; box-shadow: var(--shadow-1) !important; }
.node-card { background: var(--card) !important; border: 1px solid var(--border) !important; border-radius: var(--radius-xl) !important; box-shadow: var(--shadow-1) !important; }
.node-photo { width: 88px !important; height: 88px !important; border-radius: 9999px !important; object-fit: cover !important; border: 3px solid #fff !important; box-shadow: 0 1px 0 hsl(0 0% 100% / .6) inset; }
.ribbon { position: relative !important; display: inline-block !important; color: oklch(0.22 0.03 60) !important; font-weight: 600 !important; border-radius: 10px !important; padding: 6px 14px !important; box-shadow: var(--shadow-1) !important; font-size: clamp(12px, 2vw, 14px) !important; line-height:1.2 !important; max-width: 180px !important; white-space: nowrap !important; overflow: hidden !important; text-overflow: ellipsis !important; }
.ribbon::after { content: ""; position: absolute; right: -14px; top: 50%; transform: translateY(-50%); border-width: 10px 0 10px 14px; border-style: solid; border-color: transparent transparent transparent currentColor; opacity: .45; }
.ribbon::before { content: ""; position: absolute; left: 0; bottom: -8px; width: 16px; height: 8px; background: color-mix(in oklch, black 6%, transparent); clip-path: polygon(0 0, 100% 100%, 0 100%); filter: blur(.5px); opacity: .25; }
.ribbon-mint  { background: color-mix(in oklch, var(--mint),  white 22%) !important; color: oklch(0.30 0.03 160) !important; }
.ribbon-peach { background: color-mix(in oklch, var(--peach), white 20%) !important; color: oklch(0.32 0.04 55)  !important; }
.ribbon-lilac { background: color-mix(in oklch, var(--lilac), white 20%) !important; color: oklch(0.30 0.02 300) !important; }
.ribbon-sage  { background: color-mix(in oklch, var(--sage),  white 22%) !important; color: oklch(0.30 0.03 150) !important; }
.ribbon-sun   { background: color-mix(in oklch, var(--sun),   white 18%) !important; color: oklch(0.34 0.05 85)  !important; }
.ribbon-rose  { background: color-mix(in oklch, var(--rose),  white 20%) !important; color: oklch(0.34 0.06 20)  !important; }
.connector { stroke: color-mix(in oklch, var(--ink), white 60%) !important; stroke-width: 2 !important; stroke-linecap: round !important; }
.connector--parent { stroke: color-mix(in oklch, var(--ink), white 20%) !important; stroke-width: 3 !important; }
.connector--spouse { stroke: color-mix(in oklch, var(--ink), white 35%) !important; stroke-width: 3 !important; stroke-dasharray: 6 6 !important; }
@keyframes float-in { from { opacity: 0; transform: translateY(8px) scale(.98) } to { opacity: 1; transform: translateY(0) scale(1) } }
.float-in { animation: float-in 200ms ease-out both; }
.canvas-wrap { min-height: 64vh; }
.canvas-grid { position: relative !important; }
.canvas-grid > svg { z-index: 0 !important; }
.canvas-grid > *:not(svg) { position: relative !important; z-index: 1 !important; }
.node-card { max-width: 100% !important; flex-wrap: wrap !important; }
.node-card .ribbon { max-width: 100% !important; }
@media (max-width: 640px) {
  :root { --avatar-size: 48px; --node-max-width: 220px; }
  .node-photo { width: 70px !important; height: 70px !important; }
  .ribbon { max-width: 140px !important; }
}
@media (min-width: 1024px) { .canvas-wrap { min-height: 72vh; } }
.badge { font-size: 12px !important; padding: 2px 8px !important; border-radius: 999px !important; border: 1px solid var(--border) !important; background: var(--surface-2) !important; }
.connection-legend { position: absolute !important; bottom: 12px !important; right: 12px !important; z-index: 10 !important; font-size: 12px !important; width: 200px !important; transition: width 160ms ease, transform 160ms ease !important; }
.connection-legend h4 { margin: 0 0 6px 0 !important; font-size: 12px !important; font-weight: 600 !important; opacity: .9 !important; padding-right: 28px !important; }
.connection-legend .legend-row { display: flex !important; align-items: center !important; gap: 8px !important; }
.connection-legend .legend-row + .legend-row { margin-top: 6px !important; }
.connection-legend .legend-toggle { position: absolute !important; top: 6px !important; right: 6px !important; height: 20px !important; width: 20px !important; border-radius: 6px !important; border: 1px solid var(--border) !important; background: var(--surface-2) !important; display: inline-flex !important; align-items: center !important; justify-content: center !important; font-size: 12px !important; line-height: 1 !important; opacity: .9 !important; }
.connection-legend[data-expanded='true'] { width: 320px !important; transform: translateZ(0) !important; }
@media (max-width: 480px) { .canvas-grid > svg { display: none !important; } .connection-legend { width: 160px !important; bottom: 8px !important; right: 8px !important; } .connection-legend .legend-row svg { width: 32px !important; height: 8px !important; } .node-card { flex-direction: column !important; align-items: center !important; text-align: center !important; gap: .5rem !important; } .node-photo { width: 64px !important; height: 64px !important; } .ribbon { max-width: 140px !important; } .canvas-grid > .grid, .canvas-grid > .auto-grid { display: grid !important; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)) !important; gap: 10px !important; place-items: stretch !important; } }
@media (max-width: 360px) { .canvas-grid > .grid { grid-template-columns: 1fr !important; } }
.toolbar-rail { background: var(--card) !important; border: 1px solid var(--border) !important; border-radius: 12px !important; padding: 8px !important; box-shadow: var(--shadow-1) !important; }
.toolbar-rail button { height: 38px !important; width: 100% !important; border-radius: 10px !important; border: 1px solid var(--border) !important; background: var(--surface-2) !important; color: var(--ink) !important; display: inline-flex !important; align-items: center !important; justify-content: center !important; gap: 8px !important; font-weight: 600 !important; }
.toolbar-rail button[data-active="true"] { background: color-mix(in oklch, var(--mint), white 75%) !important; border-color: color-mix(in oklch, var(--mint), white 55%) !important; }
.canvas-title { font-weight: 700 !important; letter-spacing: -0.01em !important; color: color-mix(in oklch, var(--ink), white 5%) !important; text-align: center !important; margin: 6px 0 16px 0 !important; font-size: clamp(18px, 3.2vw, 34px) !important; }

/* ===== Refinements for v1.2 ===== */
.canvas-title { margin-top: 2px !important; margin-bottom: 18px !important; }
.node-photo { box-shadow: 0 0 0 3px #fff inset, 0 1px 0 hsl(0 0% 100% / .5) inset; }
.toolbar-rail button .i { height: 16px; width: 16px; }


